---
id: 79
title: 'DISTRIBUTED SYSTEMS: LECTURE 6-7'
date: 2015-11-05T13:21:00+00:00
author: chito
layout: post
guid: http://www.afriqueunique.org/2015/11/05/11943062/
permalink: /2015/11/05/11943062/
swp_pinterest_image_url:
  - ""
swp_cache_timestamp:
  - "419230"
post_views_count:
  - "141"
bs_social_share_facebook:
  - "0"
bs_social_share_twitter:
  - "0"
bs_social_share_reddit:
  - "0"
bs_social_share_google_plus:
  - "0"
bs_social_share_linkedin:
  - "0"
bs_social_share_interval:
  - "1568125819"
categories:
  - LEARNING
---
<span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 1<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:10pt;"><strong>DISTRIBUTED MUTUAL EXCLUSION</strong><br /><span style="font-size:10pt;"><strong>AND ELECTION</strong><br /><span style="font-size:8pt;"><strong>1. Mutual Exclusion in Distributed Systems</strong><br /><span style="font-size:8pt;"><strong>2. Non-Token-Based Algorithms</strong><br /><span style="font-size:8pt;"><strong>3. Token-Based Algorithms</strong><br /><span style="font-size:8pt;"><strong>4. Distributed Election</strong><br /><span style="font-size:8pt;"><strong>5. The Bully and the Ring-Based Algorithms</strong><br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 2<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:9pt;"><strong>Mutual Exclusion</strong><br /><span style="font-size:8pt;">☞ Mutual exclusion ensures that concurrent processes<br /><span style="font-size:8pt;">make a serialized access to shared resources or data.<br /><span style="font-size:8pt;">The well known <span style="font-size:8pt;"><em>critical section</em> <span style="font-size:8pt;">problem!<br /><span style="font-size:8pt;">☞ In a distributed system neither shared variables<br /><span style="font-size:8pt;">(semaphores) nor a local kernel can be used in order<br /><span style="font-size:8pt;">to implement mutual exclusion!<br /><span style="font-size:8pt;">Thus, mutual exclusion has to be based exclusively<br /><span style="font-size:8pt;">on message passing, in the context of unpredictable<br /><span style="font-size:8pt;">message delays and no complete knowledge of the<br /><span style="font-size:8pt;">state of the system.<br /><span style="font-size:8pt;">☞ Sometimes the resource is managed by a server<br /><span style="font-size:8pt;">which implements its own <span style="font-size:8pt;"><em>lock</em> <span style="font-size:8pt;">together with the<br /><span style="font-size:8pt;">mechanisms needed to synchronize access to the<br /><span style="font-size:8pt;">resource ⇒ mutual exclusion and the related<br /><span style="font-size:8pt;">synchronization are transparent for the process<br /><span style="font-size:8pt;">accessing the resource.<br /><span style="font-size:8pt;">This is typically the case for database systems with<br /><span style="font-size:8pt;"><em>transaction processing</em> <span style="font-size:8pt;">(see <span style="font-size:8pt;"><em>concurrency controll</em> <span style="font-size:8pt;">in<br /><span style="font-size:8pt;">Database course!)<br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 3<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Mutual Exclusion (cont’d)</strong><br /><span style="font-size:8pt;">☞ Often there is no synchronization built in which<br /><span style="font-size:8pt;">implicitely protects the resource (files, display<br /><span style="font-size:8pt;">windows, peripheral devices, etc.).<br /><span style="font-size:8pt;">A mechanism has to be implemented at the level of<br /><span style="font-size:8pt;">the process requesting for access.<br /><span style="font-size:8pt;">☞ Basic requirements for a mutual exclusion mechanism:<br /><span style="font-size:8pt;">• <span style="font-size:8pt;"><strong>safety</strong><span style="font-size:8pt;">: at most one process may execute in the<br /><span style="font-size:8pt;">critical section (CS) at a time;<br /><span style="font-size:8pt;">• <span style="font-size:8pt;"><strong>liveness</strong><span style="font-size:8pt;">: a process requesting entry to the CS is<br /><span style="font-size:8pt;">eventually granted it (so long as any process<br /><span style="font-size:8pt;">executing the CS eventually leaves it).<br /><span style="font-size:8pt;">Liveness implies freedom of <span style="font-size:8pt;"><em>deadlock</em> <span style="font-size:8pt;">and <span style="font-size:8pt;"><em>starvation</em><span style="font-size:8pt;">.<br /><span style="font-size:8pt;">☞ There are two basic approaches to distributed mutual<br /><span style="font-size:8pt;">exclusion:<br /><span style="font-size:8pt;">1. Non-token-based: each process freely and<br /><span style="font-size:8pt;">equally competes for the right to use the<br /><span style="font-size:8pt;">shared resource; requests are arbitrated by a<br /><span style="font-size:8pt;">central control site or by distributed agreement.<br /><span style="font-size:8pt;">2. Token-based: a logical token representing the<br /><span style="font-size:8pt;">access right to the shared resource is passed<br /><span style="font-size:8pt;">in a regulated fashion among the processes;<br /><span style="font-size:8pt;">whoever holds the token is allowed to enter the<br /><span style="font-size:8pt;">critical section.<br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 4<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:9pt;"><strong>Non-Token-Based Mutual Exclusion</strong><br /><span style="font-size:8pt;">• Central Coordinator Algorithm<br /><span style="font-size:8pt;">• Ricart-Agrawala Algorithm<br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 5<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:9pt;"><strong>Central Coordinator Algorithm</strong><br /><span style="font-size:8pt;">☞ A central coordinator grants permission to enter a CS.<br /><span style="font-size:8pt;">• To enter a CS, a process sends a request message<br /><span style="font-size:8pt;">to the coordinator and then waits for a reply (during<br /><span style="font-size:8pt;">this waiting period the process can continue with<br /><span style="font-size:8pt;">other work).<br /><span style="font-size:8pt;">• The reply from the coordinator gives the right to<br /><span style="font-size:8pt;">enter the CS.<br /><span style="font-size:8pt;">• After finishing work in the CS the process notifies<br /><span style="font-size:8pt;">the coordinator with a release message.<br /><span style="font-size:8pt;">P<br /><span style="font-size:8pt;">P<span style="font-size:7pt;">0 <span style="font-size:8pt;">P<span style="font-size:7pt;">1 2 <span style="font-size:8pt;">P<span style="font-size:7pt;">0 <span style="font-size:8pt;">P<span style="font-size:7pt;">1 <span style="font-size:8pt;">P<span style="font-size:7pt;">2 <span style="font-size:8pt;">P<span style="font-size:7pt;">0 <span style="font-size:8pt;">P<span style="font-size:7pt;">1 <span style="font-size:8pt;">P<span style="font-size:7pt;">2<br /><span style="font-size:8pt;">request<br /><span style="font-size:8pt;">OK<br /><span style="font-size:8pt;">request<br /><span style="font-size:8pt;">release<br /><span style="font-size:8pt;">OK<br /><span style="font-size:8pt;">Coordinator Coordinator Coordinator<br /><span style="font-size:8pt;">Queue Queue Queue<br /><span style="font-size:8pt;">2<br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 6<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Central Coordinator Algorithm (cont’d)</strong><br /><span style="font-size:8pt;">☞ The scheme is simple and easy to implement.<br /><span style="font-size:8pt;">☞ The strategy requires only three messages per use<br /><span style="font-size:8pt;">of a CS (<span style="font-size:8pt;"><em>request</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>OK</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>release</em><span style="font-size:8pt;">).<br /><span style="font-size:8pt;">Problems<br /><span style="font-size:8pt;">• The coordinator can become a performance<br /><span style="font-size:8pt;">bottleneck.<br /><span style="font-size:8pt;">• The coordinator is a critical point of failure:<br /><span style="font-size:8pt;">&#8211; If the coordinator crashes, a new coordinator<br /><span style="font-size:8pt;">must be created.<br /><span style="font-size:8pt;">&#8211; <span style="font-size:8pt;"><em>The coordinator can be one of the processes</em><br /><span style="font-size:8pt;"><em>competing for access</em><span style="font-size:8pt;">; an <span style="font-size:8pt;"><em>election algorithm</em><br /><span style="font-size:8pt;">(see later) has to be run in order to choose one<br /><span style="font-size:8pt;">and only one new coordinator.<br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 7<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:9pt;"><strong>Ricart-Agrawala Algorithm</strong><br /><span style="font-size:8pt;">☞ In a distributed environment it seems more natural to<br /><span style="font-size:8pt;">implement mutual exclusion, based upon distributed<br /><span style="font-size:8pt;">agreement &#8211; not on a central coordinator.<br /><span style="font-size:8pt;">☞ It is assumed that all processes keep a (Lamport’s)<br /><span style="font-size:8pt;">logical clock which is updated according to the rules<br /><span style="font-size:8pt;">in Fö. 5, slide 8.<br /><span style="font-size:8pt;">The algorithm requires a total ordering of requests ⇒<br /><span style="font-size:8pt;">requests are ordered according to their global logical<br /><span style="font-size:8pt;">timestamps; if timestamps are equal, process identifiers<br /><span style="font-size:8pt;">are compared to order them (see Fö. 5, slide 10).<br /><span style="font-size:8pt;">☞ The process that requires entry to a CS multicasts<br /><span style="font-size:8pt;">the request message to all other processes competing<br /><span style="font-size:8pt;">for the same resource; it is allowed to enter the CS<br /><span style="font-size:8pt;">when all processes have replied to this message.<br /><span style="font-size:8pt;">The request message consists of the requesting<br /><span style="font-size:8pt;">process’ timestamp (logical clock) and its identifier.<br /><span style="font-size:8pt;">☞ Each process keeps its state with respect to the CS:<br /><span style="font-size:8pt;"><em>released</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>requested</em><span style="font-size:8pt;">, or <span style="font-size:8pt;"><em>held</em><span style="font-size:8pt;">.<br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 8<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Ricart-Agrawala Algorithm (cont’d)</strong><br /><span style="font-size:8pt;">The Algorithm<br /><span style="font-size:8pt;">☞ Rule for process initialization<br /><span style="font-size:8pt;">/* performed by each process <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em> <span style="font-size:8pt;">at initialization <strong>/<br /><span style="font-size:8pt;">[RI1]: <span style="font-size:8pt;"><em>state</em><span style="font-size:7pt;"><em>Pi</em> <span style="font-size:8pt;">:= RELEASED.<br /><span style="font-size:8pt;">☞ Rule for access request to CS<br /><span style="font-size:8pt;">/</span> performed whenever process <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em> <span style="font-size:8pt;">requests an<br /><span style="font-size:8pt;">access to the CS <strong>/<br /><span style="font-size:8pt;">[RA1]: <span style="font-size:8pt;"><em>state</em><span style="font-size:7pt;"><em>Pi</em> <span style="font-size:8pt;">:= REQUESTED.<br /><span style="font-size:8pt;"><em>T</em><br /><span style="font-size:7pt;"><em>Pi</em> <span style="font-size:8pt;">:= the value of the local logical clock<br /><span style="font-size:8pt;">corresponding to this request.<br /><span style="font-size:8pt;">[RA2]: <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em> <span style="font-size:8pt;">sends a request message to all processes; the<br /><span style="font-size:8pt;">message is of the form (<span style="font-size:8pt;"><em>T</em><span style="font-size:7pt;"><em>Pi</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>i</em><span style="font-size:8pt;">), where <span style="font-size:8pt;"><em>i</em> <span style="font-size:8pt;">is an<br /><span style="font-size:8pt;">identifier of <span style="font-size:8pt;"><em>P</em><br /><span style="font-size:7pt;"><em>i</em><span style="font-size:8pt;">.<br /><span style="font-size:8pt;">[RA3]: <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em> <span style="font-size:8pt;">waits until it has received replies from all other<br /><span style="font-size:8pt;"><em>n</em><span style="font-size:8pt;">-1 processes.<br /><span style="font-size:8pt;">☞ Rule for executing the CS<br /><span style="font-size:8pt;">/</span> performed by <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em> <span style="font-size:8pt;">after it received the <span style="font-size:8pt;"><em>n</em><span style="font-size:8pt;">-1 replies <strong>/<br /><span style="font-size:8pt;">[RE1]: <span style="font-size:8pt;"><em>state</em><span style="font-size:7pt;"><em>Pi</em> <span style="font-size:8pt;">:= HELD.<br /><span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em><br /><span style="font-size:8pt;">enters the CS<span style="font-size:8pt;"><em>.</em><br /><span style="font-size:4pt;">Distributed Systems Fö 6/7 &#8211; 9<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Ricart-Agrawala Algorithm (cont’d)</strong><br /><span style="font-size:8pt;">☞ Rule for handling incoming requests<br /><span style="font-size:8pt;">/</span> performed by <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>i</em> <span style="font-size:8pt;">whenever it received a request<br /><span style="font-size:8pt;">(<span style="font-size:8pt;"><em>T</em><span style="font-size:7pt;"><em>Pj</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>j</em><span style="font-size:8pt;">) from <span style="font-size:8pt;"><em>P</em><span style="font-size:7pt;"><em>j</em> <span style="font-size:8pt;">*/<br /><span style="font-size:8pt;">[RH1]: <span style="font-size:8pt;"><strong>if</strong> <span style="font-size:8pt;"><em>state</em><span style="font-size:7pt;"><em>Pi</em> <span style="font-size:8pt;">= HELD <span style="font-size:8pt;"><strong>or</strong> <span style="font-size:8pt;">((</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></span></span></span></span></span></span></span></span></span></strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>