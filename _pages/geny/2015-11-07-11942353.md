---
id: 81
title: 'DISTRIBUTED SYSTEMS: LECTURE 5'
date: 2015-11-07T11:56:00+00:00
author: chito
layout: post
guid: http://www.afriqueunique.org/2015/11/07/11942353/
permalink: /2015/11/07/11942353/
swp_pinterest_image_url:
  - ""
swp_cache_timestamp:
  - "419230"
post_views_count:
  - "161"
bs_social_share_interval:
  - "1570337897"
bs_social_share_linkedin:
  - "0"
bs_social_share_reddit:
  - "0"
bs_social_share_google_plus:
  - "0"
bs_social_share_twitter:
  - "0"
bs_social_share_facebook:
  - "0"
categories:
  - LEARNING
---
<span style="font-size:4pt;">Distributed Systems Fö 5 &#8211; 1<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:10pt;"><strong>TIME AND STATE IN DISTRIBUTED</strong><br /><span style="font-size:10pt;"><strong>SYSTEMS</strong><br /><span style="font-size:8pt;"><strong>1. Time in Distributed Systems</strong><br /><span style="font-size:8pt;"><strong>2. Lamport’s Logical Clocks</strong><br /><span style="font-size:8pt;"><strong>3. Vector Clocks</strong><br /><span style="font-size:8pt;"><strong>4. Causal Ordering of Messages</strong><br /><span style="font-size:8pt;"><strong>5. Global States and their Consistency</strong><br /><span style="font-size:8pt;"><strong>6. Cuts of a Distributed Computation</strong><br /><span style="font-size:8pt;"><strong>7. Recording of a Global State</strong><br /><span style="font-size:4pt;">Distributed Systems Fö 5 &#8211; 2<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:9pt;"><strong>Time in Distributed Systems</strong><br /><span style="font-size:8pt;">☞ Because each machine in a distributed system has<br /><span style="font-size:8pt;">its own clock there is no notion of <span style="font-size:8pt;"><em>global physical time</em><span style="font-size:8pt;">.<br /><span style="font-size:8pt;">• The <span style="font-size:8pt;"><em>n</em> <span style="font-size:8pt;">crystals on the <span style="font-size:8pt;"><em>n</em> <span style="font-size:8pt;">computers will run at slightly<br /><span style="font-size:8pt;">different rates, causing the clocks gradually to get<br /><span style="font-size:8pt;">out of synchronization and give different values.<br /><span style="font-size:8pt;">Problems:<br /><span style="font-size:8pt;">• Time triggered systems: these are systems in<br /><span style="font-size:8pt;">which certain activities are scheduled to occur at<br /><span style="font-size:8pt;">predefined moments in time. If such activities are to<br /><span style="font-size:8pt;">be coordinated over a distributed system we need a<br /><span style="font-size:8pt;">coherent notion of time.<br /><span style="font-size:8pt;">Example: time-triggered real-time systems<br /><span style="font-size:8pt;">• Maintaining the consistency of distributed data is<br /><span style="font-size:8pt;">often based on the <span style="font-size:8pt;"><em>time</em> <span style="font-size:8pt;">when a certain modification<br /><span style="font-size:8pt;">has been performed.<br /><span style="font-size:8pt;">Example: a <span style="font-size:8pt;"><em>make</em> <span style="font-size:8pt;">program.<br /><span style="font-size:4pt;">Distributed Systems Fö 5 &#8211; 3<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Time in Distributed Systems (cont’d)</strong><br /><span style="font-size:8pt;">The <span style="font-size:8pt;"><em>make</em><span style="font-size:8pt;">-program example<br /><span style="font-size:8pt;">• When the programmer has finished changing some<br /><span style="font-size:8pt;">source files he starts <span style="font-size:8pt;"><em>make</em><span style="font-size:8pt;">; <span style="font-size:8pt;"><em>make</em> <span style="font-size:8pt;">examines the<br /><span style="font-size:8pt;">times at which all object and source files were last<br /><span style="font-size:8pt;">modified and decides which source files have to be<br /><span style="font-size:8pt;">(re)compiled.<br /><span style="font-size:8pt;">Although <span style="font-size:8pt;"><em>P.c</em> <span style="font-size:8pt;">is modified after <span style="font-size:8pt;"><em>P.o</em> <span style="font-size:8pt;">has been<br /><span style="font-size:8pt;">generated, because of the clock drift the time<br /><span style="font-size:8pt;">assigned to <span style="font-size:8pt;"><em>P.c</em> <span style="font-size:8pt;">is smaller.<br /><span style="font-size:8pt;"><em>P.c</em> <span style="font-size:8pt;">will not be recompiled for the new version!<br /><span style="font-size:8pt;">652 653 654 655 656<br /><span style="font-size:8pt;">Computer 1<br /><span style="font-size:8pt;">(compiler)<br /><span style="font-size:8pt;">Computer 2<br /><span style="font-size:8pt;">(editor)<br /><span style="font-size:8pt;">local<br /><span style="font-size:8pt;">physical<br /><span style="font-size:8pt;">clock<br /><span style="font-size:8pt;"><em>P.c</em> <span style="font-size:8pt;">created<br /><span style="font-size:8pt;"><em>P.o</em> <span style="font-size:8pt;">created<br /><span style="font-size:8pt;">648 649 650 651 652<br /><span style="font-size:8pt;">local<br /><span style="font-size:8pt;">physical<br /><span style="font-size:8pt;">clock<br /><span style="font-size:4pt;">Distributed Systems Fö 5 &#8211; 4<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Time in Distributed Systems (cont’d)</strong><br /><span style="font-size:8pt;">Solutions:<br /><span style="font-size:8pt;">☞ <span style="font-size:8pt;"><strong>Synchronization of physical clocks</strong><br /><span style="font-size:8pt;">• Computer clocks are synchronized with one<br /><span style="font-size:8pt;">another to an achievable, known, degree of<br /><span style="font-size:8pt;">accuracy ⇒ within the bounds of this accuracy we<br /><span style="font-size:8pt;">can coordinate activities on different computers<br /><span style="font-size:8pt;">using each computer’s local clock.<br /><span style="font-size:8pt;">• Physical clock synchronization is needed for<br /><span style="font-size:8pt;">distributed real-time systems.<br /><span style="font-size:8pt;">☞ <span style="font-size:8pt;"><strong>Logical clocks</strong><br /><span style="font-size:8pt;">• In many applications we are not interested in the<br /><span style="font-size:8pt;">physical time at which events occur; what is<br /><span style="font-size:8pt;">important is the <span style="font-size:8pt;"><em>relative order</em> <span style="font-size:8pt;">of events!<br /><span style="font-size:8pt;">The <span style="font-size:8pt;"><em>make</em><span style="font-size:8pt;">-program is such an example (slide 3).<br /><span style="font-size:8pt;">• In such situations we don’t need synchronized<br /><span style="font-size:8pt;">physical clocks.<br /><span style="font-size:8pt;">Relative ordering is based on a virtual notion of<br /><span style="font-size:8pt;">time &#8211; <span style="font-size:8pt;"><em>logical time</em><span style="font-size:8pt;">.<br /><span style="font-size:8pt;">• Logical time is implemented using <span style="font-size:8pt;"><em>logical clocks</em><span style="font-size:8pt;">.<br /><span style="font-size:4pt;">Distributed Systems Fö 5 &#8211; 5<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:9pt;"><strong>Lamport’s Logical Clocks</strong><br /><span style="font-size:8pt;">☞ The order of events occurring at different processes<br /><span style="font-size:8pt;">is critical for many distributed applications.<br /><span style="font-size:8pt;">Example: <span style="font-size:8pt;"><em>P.o_created</em> <span style="font-size:8pt;">and <span style="font-size:8pt;"><em>P.c_created</em> <span style="font-size:8pt;">in slide 3.<br /><span style="font-size:8pt;">☞ Ordering can be based on two simple situations:<br /><span style="font-size:8pt;">1. If two events occurred in the same process<br /><span style="font-size:8pt;">then they occurred in the order observed following the respective process;<br /><span style="font-size:8pt;">2. Whenever a message is sent between<br /><span style="font-size:8pt;">processes, the event of sending the message<br /><span style="font-size:8pt;">occurred before the event of receiving it.<br /><span style="font-size:8pt;">☞ Ordering by Lamport is based on the <span style="font-size:8pt;"><em>happenedbefore relation</em> <span style="font-size:8pt;">(denoted by →):<br /><span style="font-size:8pt;">• <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">, if <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">and <span style="font-size:8pt;"><em>b</em> <span style="font-size:8pt;">are events in the same process<br /><span style="font-size:8pt;">and <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">occurred before <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">;<br /><span style="font-size:8pt;">• <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">, if <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">is the event of sending a message <span style="font-size:8pt;"><em>m</em> <span style="font-size:8pt;">in a<br /><span style="font-size:8pt;">process, and <span style="font-size:8pt;"><em>b</em> <span style="font-size:8pt;">is the event of the same message <span style="font-size:8pt;"><em>m</em><br /><span style="font-size:8pt;">being received by another process;<br /><span style="font-size:8pt;">• If <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>b</em> <span style="font-size:8pt;">and <span style="font-size:8pt;"><em>b</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>c</em><span style="font-size:8pt;">, then <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>c</em> <span style="font-size:8pt;">(the relation is<br /><span style="font-size:8pt;">transitive).<br /><span style="font-size:4pt;">Distributed Systems Fö 5 &#8211; 6<br /><span style="font-size:5pt;">Petru Eles, IDA, LiTH<br /><span style="font-size:8pt;"><strong>Lamport’s Logical Clocks (cont’d)</strong><br /><span style="font-size:8pt;">• If <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">, we say that event <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">causally affects event <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">.<br /><span style="font-size:8pt;">The two events are causally related.<br /><span style="font-size:8pt;">• There are events which are not related by the<br /><span style="font-size:8pt;"><em>happened-before</em> <span style="font-size:8pt;">relation.<br /><span style="font-size:8pt;">If <span style="font-size:8pt;"><em>both</em> <span style="font-size:8pt;">a → e <span style="font-size:8pt;"><em>and</em> <span style="font-size:8pt;">e → a <span style="font-size:8pt;"><em>are false</em><span style="font-size:8pt;">, then <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">and <span style="font-size:8pt;"><em>e</em> <span style="font-size:8pt;">are<br /><span style="font-size:8pt;">concurrent events; we write <span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">|| <span style="font-size:8pt;"><em>e</em><span style="font-size:8pt;">.<br /><span style="font-size:8pt;"><em>P1</em><br /><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>P2</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>P3</em><span style="font-size:8pt;">: processes;<br /><span style="font-size:8pt;"><em>a</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>c</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>d</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>e</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>f</em><span style="font-size:8pt;">: events;<br /><span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>b</em><span style="font-size:8pt;">, <span style="font-size:8pt;"><em>c</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>d, e</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>f, b</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>c, d</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>f</em><br /><span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>c, a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>d, a</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>f, b</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>d, b</em> <span style="font-size:8pt;">→ <span style="font-size:8pt;"><em>f, &#8230;</em><br /><span style="font-size:8pt;"><em>a</em> <span style="font-size:8pt;">|| <span style="font-size:8pt;"><em>e</em><span style="font-size:8pt;">, </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>